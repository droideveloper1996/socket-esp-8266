<!-- <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script
      src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
      integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
      integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
      integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
      crossorigin="anonymous"
    ></script>
    <title>Dex Esp Socket</title>
  </head>
  <body>
    <div class="container">
      <div class="row">
        <h2>ESP Socket test</h2>
        <div>
          <h4>Handshake Data From Esp When Connected</h4>
          <div class="alert alert-danger" id="from"></div>
          <div class="alert alert-info" id="data"></div>
        </div>
        <button class="btn btn-primary" id="refresh">
          Check Device Status
        </button>
        <button class="btn btn-primary" id="toggle">Toggle</button>
      </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"></script>
    <script>
      const fromref = document.getElementById("from");
      const dataref = document.getElementById("data");
      const btn = document.getElementById("refresh");
      const toggle = document.getElementById("toggle");
      var action = true;
      btn.onclick = () => {
        window.location.reload();
      };

      const socket = io("http://13.232.193.81:4000/");
      socket.on("welcome", (data) => {
        console.log(data);
        socket.emit("acknowledge", {
          from: "esp",
          message: "I am connected to server",
        });
        fromref.innerText = data.from;
        dataref.innerText = data.data;
      });
      socket.on("disconnect", () => {
        console.log("Device Disconnected");
        fromref.innerText = "Device Disconnected";
        dataref.innerText = "";
      });

      toggle.onclick = () => {
        socket.emit("toggle", !action);
        action = !action;
      };

      socket.on("light", (data) => {
        alert(data);
        console.log("From Light Event", data);
      });
    </script>
  </body>
</html> -->

<!DOCTYPE html>
<html>
  <head>
    <title>Socket.io Simple Example</title>
  </head>
  <body>
    <div id="light">Unknown</div>
    <button id="toggleButton">Toggle</button>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"></script>

    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    <script>
      const socket = io("http://13.232.193.81:4000/");
      $("#toggleButton").on("click", function () {
        socket.emit("toggle", { state: true });
      });
      socket.on("light", function (light) {
        console.log(light);
        if (light.state) {
          $("#light").text("ON");
        } else {
          $("#light").text("off");
        }
      });
    </script>
  </body>
</html>
